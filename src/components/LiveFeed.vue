<script setup>
	import { ref, onMounted } from 'vue'

	const blocks = ref([])
	const colors = ['gold', 'red', 'pink', 'purple', 'blue']
	const paused = ref(false)

	function getRandomItem() {
		return {
			id: Date.now() + Math.random(),
			color: colors[Math.floor(Math.random() * colors.length)],
			drop: Math.floor(Math.random() * 5) + 1,
		}
	}

	onMounted(() => {
		for (let i = 0; i < 20; i++) {
			blocks.value.push(getRandomItem())
		}
		blocks.value.reverse()

		setInterval(() => {
			if (!paused.value) {
				blocks.value.unshift(getRandomItem())
				if (blocks.value.length > 20) blocks.value.pop()
			}
		}, 1000)
	})
</script>

<template>
	<div class="grid px-1 grid-cols-[80px_54px_1fr] gap-1">
		<div class="bg-[#1A1D1A] rounded-[8px] min-h-[108px] flex flex-col gap-2 items-center justify-center">
			<svg width="34" height="37" viewBox="0 0 34 37" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M21.7568 0.522459C23.689 0.596772 24.4323 2.18142 25.4727 2.52832C25.9185 2.67694 28.5192 2.67741 30.2285 2.97461C31.9378 3.27187 31.6405 3.64366 31.7148 5.79883C31.789 7.95361 30.0802 8.10194 29.2627 8.62207C28.4452 9.14227 24.6559 9.58843 25.1016 10.7031C25.4582 11.5948 25.5963 13.6506 25.6211 14.5674C26.7357 13.3785 27.4048 13.8992 27.7764 14.0478C28.1479 14.1965 29.114 15.1627 29.3369 15.46C29.5598 15.7572 29.7085 16.2769 29.2627 16.6484C28.8168 17.02 28.7423 17.6887 27.9248 17.54C27.1079 17.3912 27.7021 16.4252 27.7021 16.0537C27.7015 15.6822 26.8849 15.237 26.7363 15.6084C26.5877 15.98 26.2158 16.2774 25.4727 17.0205C25.6212 19.3982 24.8039 20.5129 24.8037 21.1074C25.5469 21.5533 27.4789 23.189 27.9248 23.5605C28.3707 23.9321 28.5198 24.6007 29.04 24.5264C29.5601 24.452 29.2632 24.0805 31.2695 22.9658C33.276 21.8511 31.4927 24.6004 31.8643 24.749C33.1273 24.4519 33.7219 24.8979 33.4248 25.3437C33.1275 25.7896 32.2355 25.9386 31.3438 26.6074C30.452 27.2763 28.9654 29.2818 28.5938 29.5049C28.2222 29.7278 27.7764 29.6539 27.7764 28.4648C27.7764 27.2759 27.7761 27.2762 27.1816 26.6074C26.5871 25.9386 24.3579 26.9783 23.2432 27.127C22.1284 27.2756 21.8308 27.8708 20.5674 28.8369C19.304 29.8026 16.7782 30.1737 16.4062 30.1738C16.0347 30.1738 14.0275 31.8836 13.8789 32.0322C13.7314 32.1813 14.3258 32.7759 14.8457 33.5186C15.3658 34.2618 15.3652 35.9706 14.6221 35.2275C13.8796 34.4852 13.4341 34.5585 13.2852 34.5586C13.1365 34.5586 13.5077 37.3828 12.0957 35.1533C10.6838 32.9239 11.2036 33.6671 10.0889 31.2891C9.19713 29.3866 10.5104 30.0009 11.2783 30.5459L11.5752 29.208C8.75135 28.0932 5.11057 25.7151 3.47559 23.9316C1.84063 22.1481 0.800096 19.4724 0.577148 18.9521C0.354389 18.4322 0.651077 18.1349 1.02246 18.2832C1.394 18.4318 3.84642 21.4041 4.58984 21.999C5.18437 22.4746 6.671 23.288 7.33984 23.6348C7.93412 22.3719 8.23118 22.5194 8.60254 22.7422C8.97412 22.9651 9.42061 24.4522 9.64355 24.3779C9.86642 24.3035 9.71803 23.6346 10.3125 22.9658C11.1299 22.5201 11.5759 23.7089 11.7988 23.7832C12.0214 23.8574 12.0958 23.9315 12.3926 23.7832C12.6898 23.6346 12.096 22.3715 12.9873 22.2227C13.8791 22.074 14.2507 22.7429 14.4736 22.8916C14.6966 23.0402 14.7712 22.6683 14.9941 22.4453C15.217 22.2224 14.5484 21.7022 14.9199 20.8848C15.2914 20.0675 16.2571 20.6618 16.7031 20.5879C17.1489 20.5136 16.5551 19.7701 16.332 19.3242C16.1091 18.8783 16.3316 18.5063 16.6289 18.1348C16.9261 17.7634 17.446 18.209 17.5205 17.6895C17.5948 17.1692 17.5212 17.466 17.001 16.5742C16.8524 15.6083 17.298 16.1285 18.041 15.3857C18.7838 14.643 17.9676 14.1226 17.7441 13.8994C17.5212 13.6765 17.2976 13.23 17.5947 12.7842C17.8919 12.3384 18.7095 12.1155 18.8584 11.8926C19.007 11.6696 19.0067 11.1497 18.3379 10.9268C17.6692 10.7038 17.075 10.3317 17.2236 9.81152C17.3722 9.29143 17.4463 9.29136 17.4463 8.91992C17.4463 8.54834 17.149 7.95361 16.7031 7.58203C16.2574 7.21064 16.0342 7.13609 16.1084 6.69043C16.1827 6.24453 16.8523 6.02128 17.001 5.42676C17.1495 4.83243 17.2234 4.23791 17.5947 3.56933C17.9663 2.90049 19.2303 2.67724 20.1221 1.5625C20.8355 0.670782 21.5091 0.497698 21.7568 0.522459ZM23.6895 2.78711C23.0738 2.78711 22.5742 3.18128 22.5742 3.66699C22.5745 4.15253 23.074 4.5459 23.6895 4.5459C24.3048 4.54575 24.8035 4.15244 24.8037 3.66699C24.8037 3.18137 24.3049 2.78726 23.6895 2.78711Z" fill="#46623C"/>
			</svg>
			<div class="flex flex-col items-center">
				<p class="font-extrabold text-[#FFB531] text-center leading-none">1984</p>
				<p class="text-[#839280] text-center text-[14px] leading-none">Онлайн</p>
			</div>
		</div>
		<div class="w-full h-full rounded-[8px] bg-[#1A1D1A] grid grid-rows-2">
			<div class="flex items-center justify-center cursor-pointer active">
				<svg class="fill-[#839280]" width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M7.66367 24.753C8.68962 25.6125 9.90465 26.2166 11.2092 26.5158C11.334 26.5567 11.418 26.3933 11.334 26.3117C8.53983 23.6458 10.0752 20.7607 11.2092 19.4598C12.0177 18.5312 13.1692 17.0017 13.0852 14.9507C13.0852 14.7453 13.2952 14.5808 13.4608 14.7045C15.0463 15.5247 16.1302 17.3295 16.4218 18.8053C16.8815 18.355 17.0483 17.6573 17.0483 17.0425C17.0483 16.8372 17.298 16.6727 17.5068 16.8372C19.0083 18.1905 21.5937 22.7837 17.4228 26.3922C17.34 26.475 17.4228 26.6395 17.5068 26.5987C18.7715 26.2671 19.9608 25.696 21.0103 24.9163C27.8085 19.6663 23.3868 10.3563 20.5087 7.281C20.1342 6.91117 19.4668 7.15733 19.4668 7.6905C19.4248 8.79883 19.0912 10.0285 18.2162 10.8487C17.5488 8.06033 15.3252 4.89283 12.1553 3.33417C11.7388 3.12883 11.2383 3.45667 11.2803 3.90817C11.362 7.72317 8.8735 10.1522 6.70467 13.3103C4.7855 16.1395 3.53483 21.3487 7.66367 24.753Z"/>
				</svg>
			</div>
			<div class="flex items-center justify-center cursor-pointer">
				<svg class="fill-[#839280]" width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" clip-rule="evenodd" d="M23.4611 15.4944H19.7278C17.6657 15.4944 15.9944 17.1657 15.9944 19.2278V22.9611C15.9944 25.0232 17.6657 26.6944 19.7278 26.6944H23.4611C25.5232 26.6944 27.1944 25.0232 27.1944 22.9611V19.2278C27.1944 17.1657 25.5232 15.4944 23.4611 15.4944ZM9.77222 15.4944H6.03889C3.97685 15.4944 2.30556 17.1657 2.30556 19.2278V22.9611C2.30556 25.0232 3.97685 26.6944 6.03889 26.6944H9.77222C11.8343 26.6944 13.5056 25.0232 13.5056 22.9611V19.2278C13.5056 17.1657 11.8343 15.4944 9.77222 15.4944ZM23.4611 1.80556H19.7278C17.6657 1.80556 15.9944 3.47685 15.9944 5.53889V9.27222C15.9944 11.3343 17.6657 13.0056 19.7278 13.0056H23.4611C25.5232 13.0056 27.1944 11.3343 27.1944 9.27222V5.53889C27.1944 3.47685 25.5232 1.80556 23.4611 1.80556ZM13.5056 5.53889V9.27222C13.5056 11.3343 11.8343 13.0056 9.77222 13.0056H6.03889C3.97685 13.0056 2.30556 11.3343 2.30556 9.27222V5.53889C2.30556 3.47685 3.97685 1.80556 6.03889 1.80556H9.77222C11.8343 1.80556 13.5056 3.47685 13.5056 5.53889Z"/>
				</svg>
			</div>
		</div>
		<transition-group name="drop-fall" tag="div" class="py-1 ps-1 bg-[#1A1D1A] rounded-l-[8px] gap-[4px] cards flex overflow-hidden relative" @mouseenter="paused = true"
						  @mouseleave="paused = false">
			<div v-for="(item, index) in blocks" :key="item.id" :class="['card h-[100px] min-w-[165px] rounded-[8px] flex items-center justify-center relative overflow-hidden group cursor-pointer', item.color]">
				<img :src="`/assets/img/drops/drop-${item.drop}.png`" alt="drop" class="absolute group-hover:translate-y-[-100px] duration-200"/>
				<div class="absolute bottom-[12px] left-[14px] group-hover:bottom-[-100px] duration-200 flex flex-col gap-[2px]">
					<p class="text-[10px] leading-none">Desert Eagle</p>
					<p class="text-[12px] font-bold leading-none">Cobalt Disruption</p>
				</div>
				<img src="/assets/img/cases/case-1.png" alt="case" class="absolute top-[-100px] group-hover:top-[-10px] right-0 w-[60%] duration-200"/>
				<div class="absolute bottom-[12px] left-[-100px] group-hover:left-[14px] duration-200 flex flex-col gap-[2px]">
					<div class="w-[48px] h-[48px] rounded-full overflow-hidden flex items-center">
						<img src="/assets/img/profile.png" alt="profile" class="w-full h-full object-cover"/>
					</div>
					<p class="text-[10px] leading-none">Goblin_Thug</p>
					<p class="text-[12px] font-bold leading-none">Red Case</p>
				</div>
			</div>
			<div class="w-[130px] bg-gradient-to-r from-transparent to-[#141714] absolute right-0 h-[108px] top-0"></div>
		</transition-group>
	</div>
</template>

<style scoped>
	.active {
		@apply bg-gradient-to-b to-[#212821] from-transparent rounded-[8px];
	}
	.active svg {
		@apply fill-[#FFB531];
	}

	.drop-fall-enter-from {
		top: -120px !important;
		opacity: 0;
	}
	.drop-fall-enter-active {
		transition: top 0.6s ease, opacity 0.6s ease;
	}
	.drop-fall-enter-to {
		top: 0 !important;
		opacity: 1;
	}

	.cards {
		display: flex;
		position: relative;
		transition: transform 0.6s ease;
	}

	.cards > div:not(:first-child) {
		transition: transform 0.6s ease;
	}

</style>